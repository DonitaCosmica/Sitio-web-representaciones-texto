<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/articulos.css">

    <title>Imagen | PNG</title>
</head>
<body>
	<header>
		<div class="container">
			<input type="checkbox" name="" id="check">
			<div class="logo-container">
				<a class="logo" href="../index.html">Estándares <span>Multi</span>Media</a>
			</div>
			<div class="nav-btn">
				<div class="nav-links">
					<ul>
						<li class="nav-link dropdown-btn" style="--i: 0.6s">
							<a href="../fundamentos/index.html">Fundamentos</a>

							<ul>
								<li class="dropdown-link">
									<a href="../fundamentos/multimedia.html">Multimedia</a>
								</li>
								<li class="dropdown-link">
									<a href="../fundamentos/compresion.html">Compresión</a>
								</li>
								<li class="dropdown-link">
									<a href="../fundamentos/algoritmos.html">Algoritmos</a>
								</li>
								<li class="dropdown-link">
									<a href="../fundamentos/recursos.html">Recursos Informativos</a>
								</li>
							</ul>
						</li>
						<li class="nav-link dropdown-btn" style="--i: 0.85s">
							<a href="../texto/index.html">Texto</a>

							<ul>
								<li class="dropdown-link">
									<a href="../texto/ascii.html">ASCII</a>
								</li>
								<li class="dropdown-link">
									<a href="../texto/unicode.html">Unicode</a>
								</li>
								<li class="dropdown-link">
									<a href="../texto/postscript.html">PostScript</a>
								</li>
								<li class="dropdown-link">
									<a href="../texto/pdf.html">PDF</a>
								</li>
								<li class="dropdown-link">
									<a href="../texto/rtf.html">RTF</a>
								</li>
							</ul>
						</li>
						<li class="nav-link dropdown-btn" style="--i: 1.1s">
							<a href="../imagen/index.html">Imagen</a>

							<ul>
								<li class="dropdown-link">
									<a href="../imagen/jpeg.html">JPEG</a>
								</li>
								<li class="dropdown-link">
									<a href="../imagen/png.html">PNG</a>
								</li>
								<li class="dropdown-link">
									<a href="../imagen/bmp.html">BMP</a>
								</li>
								<li class="dropdown-link">
									<a href="../imagen/gif.html">GIF</a>
								</li>
								<li class="dropdown-link">
									<a href="../imagen/wmf.html">WMF</a>
								</li>
                                <li class="dropdown-link">
									<a href="../imagen/comparacion.html">Comparación</a>
								</li>
								<li class="dropdown-link">
									<a href="../imagen/raster.html">Datos Raster</a>
								</li>
							</ul>
						</li>
                        <li class="nav-link dropdown-btn" style="--i: 1.1s">
							<a href="../audio/index.html">Audio</a>

							<ul>
								<li class="dropdown-link">
									<a href="../audio/mp3.html">MP3</a>
								</li>
								<li class="dropdown-link">
									<a href="../audio/flac.html">FLAC</a>
								</li>
								<li class="dropdown-link">
									<a href="../audio/wmf.html">WMF</a>
								</li>
								<li class="dropdown-link">
									<a href="../audio/aac.html">AAC</a>
								</li>
								<li class="dropdown-link">
									<a href="../audio/wma.html">WMA</a>
								</li>
                                <li class="dropdown-link">
									<a href="../audio/ogg.html">OGG</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
			<div class="hamburger-menu-container">
				<div class="hamburger-menu">
					<div></div>
				</div>
			</div>
		</div>
  	</header> <!-- Barra de navegación -->
    
    <section class="encabezado-articulo">
        <h1 class="titulo">Portable Network Graphics (PNG)</h1>

        <h3>Imagen</h3>
        
        <img src="../img/platano.png" alt="Una imagen de un plátano en formato PNG.">

        <p>(Si se arrastra la imagen de los plátanos, se puede notar que su fondo es totalmente transparente)</p>
    </section>

    <section class="contenido">  
        <h2>¿Qué es?</h2>

        <p>
            Es un formato de archivos gráficos de mapa de bits. Permite un alto grado de compresión, reproducción progresiva de imágenes con hasta 16.7 millones de colores y soporta la transparencia en imágenes.
        </p>
    </section> <!-- Informacion general -->

    <section class="contenido">
        <h2>Características</h2>

        <ol>
            <li>
                <p>Almacena el número de canales que tenga la imagen, si está en escala de grises, en color y si cuenta con un canal de transparencia.</p>
            </li>
            <li>
                <p>Almacena los valores gamma y el color del fondo de la imagen, soporta corrección de color e independiza la imagen del monitor.</p>
            </li>
            <li>
                <p>Soporta una profundidad de color de 16 bits por píxel en imágenes monocromáticas en escala de grises y 48 bits por píxel en imágenes en el espacio de color RGB.</p>
            </li>
            <li>
                <p>Incluye bits de corrección de errores en el archivo de imagen codificado.</p>
            </li>
            <li>
                <p>PNG suele ser drásticamente más lento durante la codificación que otros algoritmos de imagen.</p>
            </li>
        </ol>

        <h3>Uso de PNG</h3>

        <p>PNG es muy utilizado cuando se desea comprimir imágenes sin pérdidas y poder mostrar imágenes de alta calidad en pantallas, con precisión de colores y formas nítidas. También son útiles para representar imágenes con transparencia.</p>

        <p>Sin embargo, PNG no es apto para todos los casos de uso. Principalmente, no es buen formato para la impresión de imágenes en papel, puesto que las impresoras utilizan el modelo de color CMYK, no soportado por PNG. Tampoco es posible incluir múltiples imágenes en un solo archivo, cosa que si puede hacerse con GIF.</p>

        <p>El algoritmo de codificación de PNG requiere más computación que otros algoritmos, como el de JPEG. La compresión también es menos eficaz, puesto que PNG es un formato sin pérdidas.</p>

    </section> <!-- Características -->
            
    <section class="contenido">
        <h2>Historia y Versiones</h2>

        <p>PNG fue creado por el grupo llamado con su mismo nombre, conformado por las empresas Compuserve, Netscape, Spyglass y el consorcio W3C. Fue desarrollado en 1995 como una alternativa gratuita al formato GIF, cuyos derechos pertenecen a Unisys.</p>

        <ul>
            <li>
                <p class="fecha">1996</p>
                <p>
                    La especificación completa de PNG fue publicada por la W3C, y un año más tarde bajo el RFC 2083.
                </p>
            </li>
            <li>
                <p class="fecha">1998</p>
                <p>
                    Se publicó la versión 1.1 del estándar, que abordaba problemas técnicos para gamma y corrección de color.
                </p>
            </li>
            <li>
                <p class="fecha">1999</p>
                <p>
                    La versión 1.2 de PNG fue lanzada en Agosto de 1999 y agregó soporte para el fragmento iTxt como único cambio.
                </p>
            </li>
            <li>
                <p class="fecha">2003</p>
                <p>
                    La versión formateada de la versión 1.2 fue lanzada como la segunda edición del estándar.
                </p>
            </li>
            <li>
                <p class="fecha">2004</p>
                <p>
                    PNG fue publicado como estándar internacional como ISO/IEC 15948:2004.
                </p>
            </li>
        </ul>
    </section> <!-- Historia --> 

    <section class="contenido">
        <h2>Algoritmo de Codificación</h2>

        <p>PNG utiliza un proceso de compresión de dos etapas:</p>

        <ol>
            <li>
                <p class="fecha">Filtrado</p>

                <p>El algoritmo DEFLATE es muy útil para aprovechar la redundancia en los datos de una imagen. Para facilitar la compresión, PNG "prepara" la imagen aplicando uno de 5 filtros diferentes.</p>
            </li>
            <li>
                <p class="fecha">Algoritmo de compresión sin pérdidas DEFLATE</p>

                <p>Este algoritmo de uso libre involucra una combinación de LZ77 y codificación Huffman para lograr la compresión de la imagen sin ninguna pérdia de información.</p>
            </li>
        </ol>

        <p>Al ser un formato de imagen sin pérdidas, el proceso de codificación puede ser ejecutado a la inversa para la decodificación y la imagen decodificada será exactamente igual a la imagen originalmente codificada.</p>
    </section> <!-- Datos interesantes -->  

    <section class="contenido">
        <h2>Filtrado</h2>

        <p>El algoritmo de compresión DEFLATE, basado en LZ77 y codificación Huffman, tiene un rendimiento inadecuado cuando no es capaz de encontrar valores redundantes en los datos de la imagen. Esto puede suceder aún cuando la información de la imagen posee patrones que son claramente aprovechables por su redundancia, tales como diferencias similares.</p>

        <p>Por ejemplo, si una fila de bytes de una imagen tiene valores totalmente distintos, pero estos valores tienen una diferencia de 6 con respecto al byte anterior, se podría representar la fila como un valor inicial seguido las diferencias de todos los valores siguientes, con respecto a sus valores anteriores. Una fila como { 20, 26, 32, 38, 44 } produciría una fila similar a { 20, 6, 6, 6, 6 }, que puede ser comprimida como { 20, (4, 6)}.</p>

        <img src="../img/filtros_png.png" alt="Matriz con ejemplo de filtrado PNG.">

        <p>Para aprovechar esto, PNG utiliza cinco diferentes filtros en su primera etapa de codificación:</p>

        <ol>
            <li>
                <p class="fecha">Ninguno</p>

                <p>Este filtro no realiza ninguna transformación sobre la información de la imagen.</p>
            </li>

            <li>
                <p class="fecha">SUB</p>
                
                <p>Este filtro produce como resultado la diferencia entre el valor del byte actual y el valor del byte anterior, módulo 256 (por los valores de 8 bits). </p> 
                
                <p>Por ejemplo, el byte con valor "140", con "133" como su byte anterior, produciría un byte resultante de "7". Un byte con valor "140" con "151" como su byte anterior resultaría en "245", dado que los bytes no tienen signo y el valor anterior es mayor que el actual.</p>
            </li>

            <li>
                <p class="fecha">UP</p>
                
                <p>El filtro "superior" o "arriba" realiza la misma operación de diferencia que el filtro SUB, pero en vez de usar el valor del byte anterior toma el valor del byte directamente sobre el byte actual (si se representa como una matriz de bytes, tomaría el byte en la fila anterior a la del byte actual).</p>
            </li>

            <li>
                <p class="fecha">PROMEDIO</p>

                <p>El filtro "promedio" realiza una diferencia del byte actual con el promedio del byte a su izquierda y el byte arriba el byte actual.</p>
            </li>

            <li>
                <p class="fecha">"PAETH"</p>

                <p>Es el filtro con la operación más compleja de todos los filtros. En general, solo "elige" el mejor píxel de entre los 3 vecinos del píxel actual para obtener un mejor resultado.</p> 
                
                <p>Dados los bytes I (Izquierda), A (Arriba) e IA (Arriba a la izquierda). Inicia obteniendo un valor base "B", realizando la operación B = A + I - IA. Luego obtiene 3 valores, definidos como la diferencia entre el valor B con cada uno de los tres valores de byte iniciales. Determina el menor valor de estos 3 nuevos valores y lo resta al valor del byte actual, para obtener el resultado del filtro.</p>
            </li>
        </ol>

        <p>Como es de esperar, ciertos filtros producen mejores resultados con ciertos patrones de datos. PNG determina cuál es el mejor filtro para una fila dada por medio de la "suma mínima de diferencias absolutas". Esta operación es realizada por cada uno de los 5 filtros, por cada fila de la imagen. El filtro que produzca los resultados con la menor diferencia absoluta entre ellos es elegido como el filtro aplicado a la fila. En general, mientras menos varíen los datos resultantes de un filtro, mejores serán los resultados de compresión del algoritmo DEFLATE.</p>
    </section>

    <section class="contenido">
        <h2>DEFLATE</h2>

        <p>En la segunda etapa de la codificación, PNG utiliza el algoritmo de compresión Lempel-Ziv, publicado en 1977. Este algoritmo consiste en buscar coincidencias de datos existentes en los bytes siguientes del byte actual, para poder almacenarlos como una referencia a los datos existentes.</p>

        <p>LZ77 tiene dos componentes fundamentales: una "ventana deslizante" y un "buffer de avistamiento" o "Look Ahead Buffer." Ambos elementos forman lo que se conoce como el "buffer de búsqueda", que tiene una longitud equivalente a la suma de la longitud de los dos elementos que lo forman.</p>

        <p>PNG utiliza un tamaño de ventana deslizante de aproximadamente 32 kB, con la intención de aumentar la posibilidad de encontrar coincidencias.</p>

        <p>Para realizar la compresión, la ventana deslizante y el bufer de avistamiento se colocan de manera contigua y los datos de la imagen son recorridos, byte por byte, de derecha a izquierda. Esto se muestra en la siguiente imagen:</p>

        <img src="../img/ventana_deslizante_lz77.png" alt="Ventana deslizante y buffer de LZ77.">

        <p>Cada vez que la información se recorre una posición a la izquierda, el algoritmo revisa si existen coincidencias entre los bytes en el buffer de avistamiento y cualquier cadena en la ventana deslizante. Es importante notar que busca la coincidencia con mayor longitud. De esta manera, si se encuentran "a" y "ab" como coincidencias de "ab" en el buffer, el algoritmo creará una referencia a la segunda. LZ77 de PNG solo crea una referencia si la cadena tiene una longitud mayor o igual a 3.</p>

        <p>Cada referencia creada por el algoritmo contiene dos datos: la longitud de la cadena comprimida y el offset entre el inicio de la cadena original (en la ventana deslizante) y el inicio de la cadena coincidente.</p>

        <p>En la imagen anterior, existe una coincidencia para la cadena "abraca". LZ77, en vez de recorrer un caracter, remueve la cadena coincidente y crea una referencia con una longitud de 6 valores y un offset de 7.</p>

        <p>Finalmente, PNG utiliza una versión específica del algoritmo de codificación Huffman para reducir aún más los valores individuales resultantes del proceso de compresión con LZ77.</p>
    </section>

    <section class="contenido">
        <h2>Recursos Informativos</h2>
        
        <div class="lista-tarjetas">
            <a href="https://www.ecured.cu/Portable_Network_Graphics_(PNG)">
                <div class="tarjeta-recurso">
    
                    <h4>Portable Network Graphics (PNG)</h4>

                    <span class="material-icons">
                        open_in_new
                    </span>
                </div>
            </a>
            <a href="https://www.ecured.cu/Lz77">
                <div class="tarjeta-recurso">
    
                    <h4>Algoritmo LZ77 - EcuRed</h4>

                    <span class="material-icons">
                        open_in_new
                    </span>
                </div>
            </a>
            <a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-wusp/fb98aa28-5cd7-407f-8869-a6cef1ff1ccb">
                <div class="tarjeta-recurso">
    
                    <h4>LZ77 Compression Algorithm</h4>

                    <span class="material-icons">
                        open_in_new
                    </span>
                </div>
            </a>
        </div>
    </section> <!-- Recursos -->
</body>
</html>